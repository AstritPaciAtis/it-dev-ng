<p-confirmDialog header="Confirmation" acceptLabel="OK" [closable]="false"
                 [style]="{width: '50vw'}"></p-confirmDialog>

<div class="top-wrapper" *ngIf="element">
  <div class="ui-g">
    <div class="ui-g-6">
      <h1 *ngIf="element.uuid">Project Edit</h1>
      <h1 *ngIf="!element.uuid">New Project</h1>
    </div>
    <div class="ui-g-6">
      <button pButton type="button" class="pull-right ui-button-primary" icon="fa fa-warning"
              label="Undo"
              (click)="goToList()"></button>

      <ng-container>
        <!--        <button pButton type="button" *ngIf="!element.uuid" (click)="save()" icon="pi pi-save"-->
        <!--                [disabled]="!theform.form.valid" label="Save"-->
        <!--                class="pull-right ui-button-secondary"></button>-->

        <button pButton type="button" *ngIf="!element.uuid" (click)="beforeSave()" icon="pi pi-save"
                [disabled]="!theform.form.valid" label="Save"
                class="pull-right ui-button-secondary"></button>

        <button pButton type="button" *ngIf="element.uuid" class="pull-right ui-button-secondary"
                icon="fa fa-save"
                [disabled]="!theform.form.valid" label="Update" (click)="update()"></button>

        <button pButton type="button" *ngIf="element.uuid" class="pull-right ui-button-danger"
                icon="fa fa-trash"
                [disabled]="!theform.form.valid" label="Delete" (click)="confirmDelete()"></button>
      </ng-container>
    </div>
  </div>
</div>

<div class="wrapper">
  <div class="ui-g">
    <div class="ui-g-12">

      <form #theform="ngForm">
        <p-tabView *ngIf="element">
          <p-tabPanel header="Blogpost Configuration">
            <div class="ui-g">
              <div class="ui-g-12 clearfix">
                <div class="ui-g-12">
                  <div class="form-group clearfix ui-g">
                    <label class="label-text ui-g-3">Name (*)</label>
                    <div class="ui-g-9">
                      <input type="text" pInputText placeholder="Name" id="name" required
                             [(ngModel)]="element.name"
                             name="name" #name="ngModel">

                      <div [hidden]="name.valid || name.pristine" class="alert alert-danger">
                        Name is required!
                      </div>
                    </div>
                  </div>

                  <div class="form-group clearfix ui-g">
                    <label class="label-text ui-g-3">Description</label>
                    <div class="ui-g-9">
                      <input type="text" pInputText placeholder="Title" id="title"
                             [(ngModel)]="element.description"
                             name="description" #description="ngModel">
                    </div>
                  </div>

                  <div class="form-group clearfix ui-g">
                    <label class="label-text ui-g-3">Tags</label>
                    <div class="ui-g-9">
                      <input type="text" pInputText placeholder="Tags" id="tags"
                             [(ngModel)]="element.tags" name="tags" #tags="ngModel">
                    </div>
                  </div>

                  <div class="form-group clearfix ui-g">
                    <label class="label-text ui-g-3">Properties</label>

                    <div class="ui-g-9">
                      <div class="form-group" *ngFor="let prop of properties">
                        <div class="ui-g-5">
                          <input type="text" pInputText placeholder="Property name" id="prop_name"
                                 [(ngModel)]="prop.name" name="prop_name">
                        </div>

                        <div class="ui-g-5">
                          <input type="text" pInputText placeholder="Property value" id="prop_value"
                                 [(ngModel)]="prop.value" name="prop_value">
                        </div>

                        <div class="ui-g-2">
                          <button pButton pRipple type="button" icon="pi pi-plus"
                                  class="p-button-rounded" (click)="addProperty()"></button>
                        </div>
                      </div>
                    </div>
                  </div>

                  {{element | json}}
                </div>
              </div>
            </div>
          </p-tabPanel>
        </p-tabView>
      </form>

    </div>
  </div>
</div>
